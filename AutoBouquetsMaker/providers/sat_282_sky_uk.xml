<provider>
	<name>Sky UK</name>
	<streamtype>dvbs</streamtype>
	<protocol>sky</protocol>
	<transponder
		orbital_position="282"
		frequency="11778000"
		symbol_rate="27500000"
		polarization="1"
		fec_inner="0"
		inversion="2"
		system="0"
		modulation="1"
		roll_off="0"
		pilot="2"
	/>
	<dvbsconfigs>
		<configuration key="hd_atherstone" bouquet="0x1005" region="0x13">Atherstone HD</configuration>
		<configuration key="hd_border_england" bouquet="0x1005" region="0x0c">Border England HD</configuration>
		<configuration key="hd_border_scotland" bouquet="0x1006" region="0x24">Border Scotland HD</configuration>
		<configuration key="hd_brighton" bouquet="0x1007" region="0x41">Brighton HD</configuration>
		<configuration key="hd_central_midlands" bouquet="0x1005" region="0x03">Central Midlands HD</configuration>
		<configuration key="hd_channel_isles" bouquet="0x1008" region="0x22">Channel Isles HD</configuration>
		<configuration key="hd_dundee" bouquet="0x1006" region="0x27">Dundee HD</configuration>
		<configuration key="hd_east_midlands" bouquet="0x1005" region="0x14">East Midlands HD</configuration>
		<configuration key="hd_essex" bouquet="0x1005" region="0x02">Essex HD</configuration>
		<configuration key="hd_gloucester" bouquet="0x1005" region="0x18">Gloucester HD</configuration>
		<configuration key="hd_grampian" bouquet="0x1006" region="0x23">Grampian HD</configuration>
		<configuration key="hd_granada" bouquet="0x1005" region="0x07">Granada HD</configuration>
		<configuration key="hd_henley_on_thames" bouquet="0x1007" region="0x46">Henley On Thames HD</configuration>
		<configuration key="hd_htv_wales" bouquet="0x1007" region="0x2b">HTV Wales HD</configuration>
		<configuration key="hd_htv_west" bouquet="0x1005" region="0x04">HTV West HD</configuration>
		<configuration key="hd_htv_west_thames_valley" bouquet="0x1007" region="0x3f">HTV West / Thames Valley HD</configuration>
		<configuration key="hd_humber" bouquet="0x1005" region="0x1d">Humber HD</configuration>
		<configuration key="hd_london" bouquet="0x1005" region="0x01">London HD</configuration>
		<configuration key="hd_london_essex" bouquet="0x1005" region="0x12">London / Essex HD</configuration>
		<configuration key="hd_london_kent" bouquet="0x1007" region="0x40">London Kent HD</configuration>
		<configuration key="hd_london_thames_valley" bouquet="0x1007" region="0x42">London / Thames Valley HD</configuration>
		<configuration key="hd_meridian_east" bouquet="0x1005" region="0x0b">Meridian East HD</configuration>
		<configuration key="hd_meridian_north" bouquet="0x1007" region="0x44">Meridian North HD</configuration>
		<configuration key="hd_meridian_south" bouquet="0x1005" region="0x05">Meridian South HD</configuration>
		<configuration key="hd_meridian_south_east" bouquet="0x1005" region="0x0a">Meridian South East HD</configuration>
		<configuration key="hd_merseyside" bouquet="0x1007" region="0x2d">Merseyside HD</configuration>
		<configuration key="hd_norfolk" bouquet="0x1005" region="0x15">Norfolk HD</configuration>
		<configuration key="hd_north_east_midlands" bouquet="0x1007" region="0x3e">North East Midlands HD</configuration>
		<configuration key="hd_north_west_yorkshire" bouquet="0x1005" region="0x08">North West Yorkshire HD</configuration>
		<configuration key="hd_north_yorkshire" bouquet="0x1005" region="0x1a">North Yorkshire HD</configuration>
		<configuration key="hd_northern_ireland" bouquet="0x1008" region="0x21">Northern Ireland HD</configuration>
		<configuration key="hd_oxford" bouquet="0x1007" region="0x47">Oxford HD</configuration>
		<configuration key="hd_ridge_hill" bouquet="0x1007" region="0x29">Ridge Hill HD</configuration>
		<configuration key="hd_scarborough" bouquet="0x1007" region="0x3d">Scarborough HD</configuration>
		<configuration key="hd_scottish_east" bouquet="0x1006" region="0x26">Scottish East HD</configuration>
		<configuration key="hd_scottish_west" bouquet="0x1006" region="0x25">Scottish West HD</configuration>
		<configuration key="hd_sheffield" bouquet="0x1007" region="0x3c">Sheffield HD</configuration>
		<configuration key="hd_south_lakeland" bouquet="0x1005" region="0x1c">South Lakeland HD</configuration>
		<configuration key="hd_south_yorkshire" bouquet="0x1007" region="0x48">South Yorkshire HD</configuration>
		<configuration key="hd_tees" bouquet="0x1007" region="0x45">Tees HD</configuration>
		<configuration key="hd_thames_valley" bouquet="0x1005" region="0x09">Thames Valley HD</configuration>
		<configuration key="hd_tring" bouquet="0x1005" region="0x1b">Tring HD</configuration>
		<configuration key="hd_tyne" bouquet="0x1005" region="0x0d">Tyne HD</configuration>
		<configuration key="hd_wales" bouquet="0x1008" region="0x20">Wales HD</configuration>
		<configuration key="hd_west_anglia" bouquet="0x1005" region="0x19">West Anglia HD</configuration>
		<configuration key="hd_west_dorset" bouquet="0x1007" region="0x43">West Dorset HD</configuration>
		<configuration key="hd_westcountry" bouquet="0x1005" region="0x06">Westcountry HD</configuration>
		<configuration key="sd_atherstone" bouquet="0x1001" region="0x13">Atherstone SD</configuration>
		<configuration key="sd_border_england" bouquet="0x1001" region="0x0c">Border England SD</configuration>
		<configuration key="sd_border_scotland" bouquet="0x1002" region="0x24">Border Scotland SD</configuration>
		<configuration key="sd_brighton" bouquet="0x1003" region="0x41">Brighton SD</configuration>
		<configuration key="sd_central_midlands" bouquet="0x1001" region="0x03">Central Midlands SD</configuration>
		<configuration key="sd_channel_isles" bouquet="0x1004" region="0x22">Channel Isles SD</configuration>
		<configuration key="sd_dundee" bouquet="0x1002" region="0x27">Dundee SD</configuration>
		<configuration key="sd_east_midlands" bouquet="0x1001" region="0x14">East Midlands SD</configuration>
		<configuration key="sd_essex" bouquet="0x1001" region="0x02">Essex SD</configuration>
		<configuration key="sd_gloucester" bouquet="0x1001" region="0x18">Gloucester SD</configuration>
		<configuration key="sd_grampian" bouquet="0x1002" region="0x23">Grampian SD</configuration>
		<configuration key="sd_granada" bouquet="0x1001" region="0x07">Granada SD</configuration>
		<configuration key="sd_henley_on_thames" bouquet="0x1003" region="0x46">Henley On Thames SD</configuration>
		<configuration key="sd_htv_wales" bouquet="0x1003" region="0x2b">HTV Wales SD</configuration>
		<configuration key="sd_htv_west" bouquet="0x1001" region="0x04">HTV West SD</configuration>
		<configuration key="sd_htv_west_thames_valley" bouquet="0x1003" region="0x3f">HTV West / Thames Valley SD</configuration>
		<configuration key="sd_humber" bouquet="0x1001" region="0x1d">Humber SD</configuration>
		<configuration key="sd_london" bouquet="0x1001" region="0x01">London SD</configuration>
		<configuration key="sd_london_essex" bouquet="0x1001" region="0x12">London / Essex SD</configuration>
		<configuration key="sd_london_kent" bouquet="0x1003" region="0x40">London Kent SD</configuration>
		<configuration key="sd_london_thames_valley" bouquet="0x1003" region="0x42">London / Thames Valley SD</configuration>
		<configuration key="sd_meridian_east" bouquet="0x1001" region="0x0b">Meridian East SD</configuration>
		<configuration key="sd_meridian_north" bouquet="0x1003" region="0x44">Meridian North SD</configuration>
		<configuration key="sd_meridian_south" bouquet="0x1001" region="0x05">Meridian South SD</configuration>
		<configuration key="sd_meridian_south_east" bouquet="0x1001" region="0x0a">Meridian South East SD</configuration>
		<configuration key="sd_merseyside" bouquet="0x1003" region="0x2d">Merseyside SD</configuration>
		<configuration key="sd_norfolk" bouquet="0x1001" region="0x15">Norfolk SD</configuration>
		<configuration key="sd_north_east_midlands" bouquet="0x1003" region="0x3e">North East Midlands SD</configuration>
		<configuration key="sd_north_west_yorkshire" bouquet="0x1001" region="0x08">North West Yorkshire SD</configuration>
		<configuration key="sd_north_yorkshire" bouquet="0x1001" region="0x1a">North Yorkshire SD</configuration>
		<configuration key="sd_northern_ireland" bouquet="0x1004" region="0x21">Northern Ireland SD</configuration>
		<configuration key="sd_oxford" bouquet="0x1003" region="0x47">Oxford SD</configuration>
		<configuration key="sd_ridge_hill" bouquet="0x1003" region="0x29">Ridge Hill SD</configuration>
		<configuration key="sd_scarborough" bouquet="0x1003" region="0x3d">Scarborough SD</configuration>
		<configuration key="sd_scottish_east" bouquet="0x1002" region="0x26">Scottish East SD</configuration>
		<configuration key="sd_scottish_west" bouquet="0x1002" region="0x25">Scottish West SD</configuration>
		<configuration key="sd_sheffield" bouquet="0x1003" region="0x3c">Sheffield SD</configuration>
		<configuration key="sd_south_lakeland" bouquet="0x1001" region="0x1c">South Lakeland SD</configuration>
		<configuration key="sd_south_yorkshire" bouquet="0x1003" region="0x48">South Yorkshire SD</configuration>
		<configuration key="sd_tees" bouquet="0x1003" region="0x45">Tees SD</configuration>
		<configuration key="sd_thames_valley" bouquet="0x1001" region="0x09">Thames Valley SD</configuration>
		<configuration key="sd_tring" bouquet="0x1001" region="0x1b">Tring SD</configuration>
		<configuration key="sd_tyne" bouquet="0x1001" region="0x0d">Tyne SD</configuration>
		<configuration key="sd_wales" bouquet="0x1004" region="0x20">Wales SD</configuration>
		<configuration key="sd_west_anglia" bouquet="0x1001" region="0x19">West Anglia SD</configuration>
		<configuration key="sd_west_dorset" bouquet="0x1003" region="0x43">West Dorset SD</configuration>
		<configuration key="sd_westcountry" bouquet="0x1001" region="0x06">Westcountry SD</configuration>
		<configuration key="sdcustom_atherstone" bouquet="0x1001" region="0x13">Atherstone Custom</configuration>
		<configuration key="sdcustom_border_england" bouquet="0x1001" region="0x0c">Border England Custom</configuration>
		<configuration key="sdcustom_border_scotland" bouquet="0x1002" region="0x24">Border Scotland Custom</configuration>
		<configuration key="sdcustom_brighton" bouquet="0x1003" region="0x41">Brighton Custom</configuration>
		<configuration key="sdcustom_central_midlands" bouquet="0x1001" region="0x03">Central Midlands Custom</configuration>
		<configuration key="sdcustom_channel_isles" bouquet="0x1004" region="0x22">Channel Isles Custom</configuration>
		<configuration key="sdcustom_dundee" bouquet="0x1002" region="0x27">Dundee Custom</configuration>
		<configuration key="sdcustom_east_midlands" bouquet="0x1001" region="0x14">East Midlands Custom</configuration>
		<configuration key="sdcustom_essex" bouquet="0x1001" region="0x02">Essex Custom</configuration>
		<configuration key="sdcustom_gloucester" bouquet="0x1001" region="0x18">Gloucester Custom</configuration>
		<configuration key="sdcustom_grampian" bouquet="0x1002" region="0x23">Grampian Custom</configuration>
		<configuration key="sdcustom_granada" bouquet="0x1001" region="0x07">Granada Custom</configuration>
		<configuration key="sdcustom_henley_on_thames" bouquet="0x1003" region="0x46">Henley On Thames Custom</configuration>
		<configuration key="sdcustom_htv_wales" bouquet="0x1003" region="0x2b">HTV Wales Custom</configuration>
		<configuration key="sdcustom_htv_west" bouquet="0x1001" region="0x04">HTV West Custom</configuration>
		<configuration key="sdcustom_htv_west_thames_valley" bouquet="0x1003" region="0x3f">HTV West / Thames Valley Custom</configuration>
		<configuration key="sdcustom_humber" bouquet="0x1001" region="0x1d">Humber Custom</configuration>
		<configuration key="sdcustom_london" bouquet="0x1001" region="0x01">London Custom</configuration>
		<configuration key="sdcustom_london_essex" bouquet="0x1001" region="0x12">London / Essex Custom</configuration>
		<configuration key="sdcustom_london_kent" bouquet="0x1003" region="0x40">London Kent Custom</configuration>
		<configuration key="sdcustom_london_thames_valley" bouquet="0x1003" region="0x42">London / Thames Valley Custom</configuration>
		<configuration key="sdcustom_meridian_east" bouquet="0x1001" region="0x0b">Meridian East Custom</configuration>
		<configuration key="sdcustom_meridian_north" bouquet="0x1003" region="0x44">Meridian North Custom</configuration>
		<configuration key="sdcustom_meridian_south" bouquet="0x1001" region="0x05">Meridian South Custom</configuration>
		<configuration key="sdcustom_meridian_south_east" bouquet="0x1001" region="0x0a">Meridian South East Custom</configuration>
		<configuration key="sdcustom_merseyside" bouquet="0x1003" region="0x2d">Merseyside Custom</configuration>
		<configuration key="sdcustom_norfolk" bouquet="0x1001" region="0x15">Norfolk Custom</configuration>
		<configuration key="sdcustom_north_east_midlands" bouquet="0x1003" region="0x3e">North East Midlands Custom</configuration>
		<configuration key="sdcustom_north_west_yorkshire" bouquet="0x1001" region="0x08">North West Yorkshire Custom</configuration>
		<configuration key="sdcustom_north_yorkshire" bouquet="0x1001" region="0x1a">North Yorkshire Custom</configuration>
		<configuration key="sdcustom_northern_ireland" bouquet="0x1004" region="0x21">Northern Ireland Custom</configuration>
		<configuration key="sdcustom_oxford" bouquet="0x1003" region="0x47">Oxford Custom</configuration>
		<configuration key="sdcustom_ridge_hill" bouquet="0x1003" region="0x29">Ridge Hill Custom</configuration>
		<configuration key="sdcustom_scarborough" bouquet="0x1003" region="0x3d">Scarborough Custom</configuration>
		<configuration key="sdcustom_scottish_east" bouquet="0x1002" region="0x26">Scottish East Custom</configuration>
		<configuration key="sdcustom_scottish_west" bouquet="0x1002" region="0x25">Scottish West Custom</configuration>
		<configuration key="sdcustom_sheffield" bouquet="0x1003" region="0x3c">Sheffield Custom</configuration>
		<configuration key="sdcustom_south_lakeland" bouquet="0x1001" region="0x1c">South Lakeland Custom</configuration>
		<configuration key="sdcustom_south_yorkshire" bouquet="0x1003" region="0x48">South Yorkshire Custom</configuration>
		<configuration key="sdcustom_tees" bouquet="0x1003" region="0x45">Tees Custom</configuration>
		<configuration key="sdcustom_thames_valley" bouquet="0x1001" region="0x09">Thames Valley Custom</configuration>
		<configuration key="sdcustom_tring" bouquet="0x1001" region="0x1b">Tring Custom</configuration>
		<configuration key="sdcustom_tyne" bouquet="0x1001" region="0x0d">Tyne Custom</configuration>
		<configuration key="sdcustom_wales" bouquet="0x1004" region="0x20">Wales Custom</configuration>
		<configuration key="sdcustom_west_anglia" bouquet="0x1001" region="0x19">West Anglia Custom</configuration>
		<configuration key="sdcustom_west_dorset" bouquet="0x1003" region="0x43">West Dorset Custom</configuration>
		<configuration key="sdcustom_westcountry" bouquet="0x1001" region="0x06">Westcountry Custom</configuration>
	</dvbsconfigs>
	<sections>
		<section number="101">Entertainment</section>
		<section number="301">Movies</section>
		<section number="350">Music</section>
		<section number="401">Sports</section>
		<section number="501">News</section>
		<section number="520">Documentaries</section>
		<section number="580">Religion</section>
		<section number="601">Kids</section>
		<section number="650">Shopping</section>
		<section number="780">International</section>
		<section number="871">Gaming and Dating</section>
		<section number="881">Specialist</section>
		<section number="900">Adult</section>
		<section number="950">BBC Regions</section>
		<section number="980">BBC Red Button</section>
		<section number="998">Sky Info</section>
		<section number="1000">Sky Sports Interactive</section>
		<section number="1020">Sky Anytime</section>
		<section number="1030">BT Sports Interactive</section>
		<section number="1050">Not indexed</section>
	</sections>
	<!-- channelsontop affect only HD bouquets -->
	<hdchannelsontop>
		<channel number="115" /><!-- BBC 1 HD -->
		<channel number="102" /><!-- BBC Two HD some regions -->
		<channel number="141" /><!-- BBC Two HD -->
		<channel number="178" /><!-- ITV HD -->
		<channel number="227" /><!-- Channel 4 HD -->
		<channel number="105" /><!-- Channel 5 HD -->
		<channel number="106" /><!-- Sky 1 HD -->
		<channel number="107" /><!-- Sky Living HD -->
		<channel number="108" /><!-- Sky Atlantic HD -->
		<channel number="109" /><!-- Watch HD -->
		<channel number="111" /><!-- Dave HD -->
		<channel number="112" /><!-- Comedy Central HD -->
		<channel number="113" /><!-- Universal HD -->
		<channel number="114" /><!-- Syfy HD -->
		<channel number="143" /><!-- BBC Four HD -->
	</hdchannelsontop>
	<sdchannelsontop>
		<channel number="115" /><!-- BBC 1 HD -->
		<channel number="141" /><!-- BBC Two HD -->
		<channel number="178" /><!-- ITV HD -->
		<channel number="227" /><!-- Channel 4 HD -->
		<channel number="171" /><!-- Channel 5 HD -->
		<channel number="217" /><!-- Sky 1 HD -->
		<channel number="221" /><!-- Sky Living HD -->
		<channel number="222" /><!-- Sky Atlantic HD -->
		<channel number="245" /><!-- Watch HD -->
		<channel number="246" /><!-- Dave HD -->
		<channel number="205" /><!-- Comedy Central HD -->
		<channel number="204" /><!-- Universal HD -->
		<channel number="201" /><!-- Syfy HD -->
		<channel number="143" /><!-- BBC Four HD -->
		<channel number="225" /><!-- ITV2 HD -->
		<channel number="263" /><!-- ITV3 HD -->
		<channel number="268" /><!-- ITV4 HD -->
	</sdchannelsontop>
	<!-- swapchannels affects main and sections bouquets. "number" is the SD channel. "with" is the HD channel. Swap will not occur if target is not HD -->
	<swapchannels>
		<channel number="101" with="115" /><!-- BBC One HD -->
		<channel number="102" with="141" /><!-- BBC Two HD -->
		<channel number="103" with="178" /><!-- ITV HD -->
		<channel number="104" with="227" /><!-- Channel 4 HD -->
		<channel number="105" with="171" /><!-- Channel 5 HD -->
		<channel number="116" with="143" /><!-- BBC Four HD -->
		<channel number="118" with="225" /><!-- ITV2 HD -->
		<channel number="119" with="263" /><!-- ITV3 HD -->
		<channel number="120" with="268" /><!-- ITV4 HD -->
		<channel number="134" with="280" /><!-- S4C HD -->
		<channel number="418" with="453" /><!-- MUTV HD -->
		<channel number="428" with="462" /><!-- Premier HD -->
		<channel number="432" with="466" /><!-- Racing UK HD -->
		<channel number="437" with="490" /><!-- BoxNation HD -->
		<channel number="502" with="692" /><!-- Bloomberg HD -->
		<channel number="503" with="570" /><!-- BBC News HD -->
		<channel number="506" with="579" /><!-- CNN HD -->
		<channel number="512" with="518" /><!-- RT HD -->
		<channel number="514" with="691" /><!-- Al Jazeera HD -->
		<channel number="583" with="596" /><!-- Daystar HD -->
		<channel number="613" with="633" /><!-- CBBC HD -->
		<channel number="614" with="624" /><!-- CBeebies HD -->
		<channel number="786" with="860" /><!-- Colors HD -->
		<channel number="795" with="853" /><!-- &TV HD -->
		<channel number="801" with="856" /><!-- TV Record HD -->
	</swapchannels>
	<servicehacks>
<![CDATA[
try:
	is_assigned
except:
	is_assigned = True
	custom = True if "custom" in bouquet_key else False

	# slot some extra channels into vacant slots in the provider list if "custom" == True
	########################################################################
	#
	# format: "channel name": number,
	#
	# example: "ITV2": 118,
	#
	########################################################################
	channels_to_add = {
		"London Live": 117
	}

	channels_to_add_by_id = {
		1251: 291, # RTE One
		1252: 292, # RTE2
		1255: 293, # TV3
		1253: 294, # TG4
		2808: 295, # RTE One+1
		1025: 296, # TV3+1
		5122: 423, # eir Sport 1 (also 3601)
		5123: 424, # eir Sport 2 (also 4551)
		5311: 428, # Premier Sports
		5152: 460, # eir Sport 2 HD (also 5154)
		5153: 462, # Premier HD
		1309: 495, # Sky Sports 1 RoI
		1308: 496, # Sky Sports 2 RoI
		1323: 497, # Sky Sports 3 RoI
		1324: 498, # Sky Sports 4 RoI
		1312: 499, # Sky Sports 5 RoI
		1257: 574, # Oireachtas TV
		2804: 578, # RTE News Now
		1256: 635, # RTEjr
		2709: 128, # ComedyXtra
		4335: 122, # Sky Living+1
		1325: 406, # Sky Sp NewsHQ
		1301: 401, # Sky Sports 1
		1324: 404, # Sky Sports 4
	}

	itv_rename = {
		# ITV regions
		1020: "ITV Border Scotland",
		1043: "ITV Tyne Tees HD",
		1044: "ITV Yorkshire HD",
		1045: "ITV Anglia HD",
		1061: "ITV Border England HD",
		1062: "ITV Westcountry West HD",
		1063: "ITV Westcountry SW HD",		
		2296: "S4C HD",
		3527: "STV Edinburgh",
		4012: "UTV Ireland",
		4055: "STV HD",
		5070: "STV Glasgow",
		6000: "ITV London",
		6010: "ITV Central South",
		6011: "ITV Central East",
		6015: "ITV Central SW",
		6030: "ITV West",
		6040: "ITV West Country",
		6089: "ITV Anglia East",
		6130: "ITV Granada",
		6140: "ITV Meridian South",
		6142: "ITV Meridian East",
		6143: "ITV Meridian North",
		6160: "ITV Yorkshire West",
		6161: "ITV Yorkshire East",
		6200: "ITV Channel Isles",
		6300: "ITV Central",
		6381: "ITV Anglia West",
		6390: "ITV Tyne Tees",
		6110: "ITV Border",
		6020: "ITV Wales",
		6012: "ITV +1 Wales",
		6065: "ITV +1 Yorkshire",
		6125: "ITV +1 West Country",
		6126: "ITV +1 Tyne Tees",
		6127: "ITV +1 West",
		6128: "ITV +1 Anglia",
		6145: "ITV +1 Central",
		6155: "ITV +1 London",
		6355: "ITV +1 Granada",
		6365: "ITV +1 Meridian",
		6210: "STV Grampian",
		6220: "STV Scotland West",
		6230: "UTV",
		6371: "STV Scotland East",
		6500: "ITV Yorkshire West HD",
		6501: "ITV Wales HD",
		6502: "ITV Meridian South HD",
		6503: "ITV Central West HD",
		6504: "ITV London HD",
		6505: "ITV Granada HD",
		6510: "UTV HD"
	}	
	
	rename = {
		# BT Interactive
		5381: "BT Sport Mosaic 2",
		5382: "BT Sport Extra 2",
		5383: "BT Sport Extra 3",
		5384: "BT Sport Extra 4",
		5385: "BT Sport Extra 5",
		5386: "BT Sport Extra 6",

		# Other channels
		2079: "BBC One HD",

		# RoI Sports channels
		1309: "Sky Sports 1 RoI",
		1308: "Sky Sports 2 RoI",
		1323: "Sky Sports 3 RoI",
		1324: "Sky Sports 4 RoI",
		1312: "Sky Sports 5 RoI"
	}

	whitelist = ['ITV HD','ITV2 HD','ITV3 HD','ITV4 HD',752,'BoxNation HD']

	whitelist_by_id = [
		1003, # MUTV HD
		1019, # CNN HD
		1047, # Insight HD
		5152, # eir Sport 2 HD
		5153, # Premier HD
		5154, # eir Sport 2 HD
		5272  # Racing UK HD
	]

	blacklist = ["10001", "10002"]
	
	blacklist_by_id = [
		9700, # ___4109
		9800, # ___4110
	]
	
	bt_sports_id = [5030,5381,5031,5382,5383,5384,5385,5386]

	fta_corrections_by_id = [
		5036, # AMC from BT
		1024, # 10002
		1027, # 10001
	]

# BBC HD channel numbers
if service["channel_id"] in (2075,) and 115 in service["numbers"]: # BBC2 HD
	service["numbers"][service["numbers"].index(115)] = 141
	service["number"] = 141
if service["channel_id"] in (2076,2081,2082,2083) and 141 in service["numbers"]: # BBC1 HD
	service["numbers"][service["numbers"].index(141)] = 115
	service["number"] = 115
	
# S4C swap problem when region is Wales
if service["channel_id"] == 5701 and service["number"] == 104:
	for k2 in tmp_services_dict.keys():
		if tmp_services_dict[k2]["channel_id"] == 2296 and tmp_services_dict[k2]["number"] == 280:
			service_tmp = service
			service = tmp_services_dict[k2]
			service["number"] = 104
			service["numbers"] = [104]
			service_tmp["number"] = 280
			service_tmp["numbers"] = [280]
			tmp_services_dict[k2] = service_tmp
			del service_tmp
			break;
if service["channel_id"] == 1622 and service["number"] == 117:
	for k2 in tmp_services_dict.keys():
		if tmp_services_dict[k2]["channel_id"] == 4075 and tmp_services_dict[k2]["number"] == 227:
			service_tmp = service
			service = tmp_services_dict[k2]
			service["number"] = 117
			service["numbers"] = [117]
			service_tmp["number"] = 227
			service_tmp["numbers"] = [227]
			tmp_services_dict[k2] = service_tmp
			del service_tmp
			break;

# Correct service type of HD channels not marked as such
if service["service_type"] in DvbScanner.VIDEO_ALLOWED_TYPES and service["service_type"] not in DvbScanner.HD_ALLOWED_TYPES and service["service_name"][-2:] == 'HD':
	print>>log, "[ABM-Hack] Sky UK: %s, changed from type %d to 25" % (service["service_name"], service["service_type"])
	service["service_type"] = 25

# Rename channels
if "channel_id" in service and service["channel_id"] in rename:
	service["interactive_name"] = rename[service["channel_id"]]

# Rename ITV channels
if "channel_id" in service and service["channel_id"] in itv_rename:
	service["interactive_name"] = itv_rename[service["channel_id"]]

# Remove TSID 2023
if custom and service["transport_stream_id"] == 2023:
	while service["number"] in LCNs_in_use:
		LCNs_in_use.remove(service["number"])
	skip = True

# Add channels by name
if custom and service["service_name"] in channels_to_add and service["service_type"] in DvbScanner.VIDEO_ALLOWED_TYPES and channels_to_add[service["service_name"]] not in LCNs_in_use:
	LCNs_in_use.append(channels_to_add[service["service_name"]])
	service["number"] = channels_to_add[service["service_name"]]
	service["numbers"] = [channels_to_add[service["service_name"]]]

# Add channels by ID
if custom and service["channel_id"] in channels_to_add_by_id and service["service_type"] in DvbScanner.VIDEO_ALLOWED_TYPES and channels_to_add_by_id[service["channel_id"]] not in LCNs_in_use:
	LCNs_in_use.append(channels_to_add_by_id[service["channel_id"]])
	service["number"] = channels_to_add_by_id[service["channel_id"]]
	service["numbers"] = [channels_to_add_by_id[service["channel_id"]]]

if service["service_type"] == 0x02 and service["number"] > 3000:
	service["number"] -= 3000

if service["service_type"] != 2 and (service["number"] in whitelist or service["service_name"] in whitelist or ("channel_id" in service and service["channel_id"] in whitelist_by_id)):
	pass
elif custom and service["service_type"] != 2 and (service["number"] in blacklist or service["service_name"] in blacklist):
	skip = True
elif custom and service["service_type"] in DvbScanner.HD_ALLOWED_TYPES and service["free_ca"] != 0:
	skip = True
elif custom and ("channel_id" in service and service["channel_id"] in blacklist_by_id):
	skip = True

new_numbers = []
for number in service["numbers"]:
	if number >= 3000 and number <= 3999: # radio
		new_numbers.append(number - 3000)
	elif number >= 1050 and number <= max(LCNs_in_use): # not indexed channels
		new_numbers.append(number)
	elif number > 999 or number < 101:
		if service["channel_id"] > 1470 and service["channel_id"] < 1486: # Sky Sports Interactive
			new_numbers.append(service["channel_id"] - 471)
			service["interactive_name"] = "Sky Sports Interactive " + str(service["channel_id"])
		elif service["channel_id"] > 4093 and service["channel_id"] < 4099: # Sky Anytime
			new_numbers.append(service["channel_id"] - 3074)
			service["interactive_name"] = "Sky Anytime " + str(service["channel_id"])
		elif service["channel_id"] in bt_sports_id:
			new_numbers.append(1030 + bt_sports_id.index(service["channel_id"]))
		else:
			if extraservices:
				i = 1450
				while i > 1049 and i not in LCNs_in_use:
					i -= 1
				LCNs_in_use.append(i+1)
				new_numbers.append(i+1)
			else:
				skip = True
		break
	elif service["service_name"] in ('Sky Intro') and number < 998: # Sky Intro
		skip = True
	else:
		new_numbers.append(number)
service["numbers"] = new_numbers

#Some encrypted channels are wrongly flagged as FTA.
if service["channel_id"] in fta_corrections_by_id:
	service["free_ca"] = 1
]]>
	</servicehacks>
</provider>
